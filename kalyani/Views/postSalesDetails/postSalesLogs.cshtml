
@{
    ViewBag.Title = "postSalesLogs";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .dashImg1 {
        width: 37px;
    }

    .dashImg2 {
        width: 20px;
    }

    * {
        font-family: 'Open Sans', sans-serif;
    }

    .panel-body, .nav, table.table-bordered.dataTable {
        font-size: 9pt;
    }
</style>
<div class="container-fluide">
    <div class="row">
        <div class="col-sm-2">
            <!-- small box -->
            <div class="small-box bg-aqua animated bounceInLeft">
                <div class="inner">
                    <h3 id="freshPSF"><img class="dashImg1" src="~/public/img/loading.gif" /></h3>
                    <p>Fresh PSF</p>
                </div>
                <div class="icon">
                    <i class="ion-android-call"></i>
                </div>
            </div>
        </div>
        <!-- ./col -->
        <div class="col-sm-2 col-half-offset">
            <!-- small box -->
            <div class="small-box bg-green animated bounceInLeft">
                <div class="inner">
                    <h3 id="pendingFollow"><img class="dashImg1" src="~/public/img/loading.gif" /></h3>
                    <p>Pending Follow Ups</p>
                </div>
                <div class="icon">
                    <i class="ion ion-person-add"></i>
                </div>
                @*<a href="@Url.Action("AllSalesOrders","SalesOrder")" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>*@
            </div>
        </div>
        <!-- ./col -->
        <div class="col-sm-2 col-half-offset">
            <!-- small box -->
            <div class="small-box bg-yellow animated bounceInLeft">
                <div class="inner">
                    <h3 id="nonContactss"><img class="dashImg1" src="~/public/img/loading.gif" /></h3>
                    <p>Non Contacts</p>
                </div>
                <div class="icon">
                    <i class="ion-person-add"></i>
                </div>
                @*<a href="@Url.Action("CusMasMain","CustomerMaster")" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>*@
            </div>
        </div>
        <!-- ./col -->
        <div class="col-sm-2 col-half-offset animated bounceInLeft">
            <!-- small box -->
            <div class="small-box bg-red">
                <div class="inner">
                    <h3 id="incompleteSurvey"><img class="dashImg1" src="~/public/img/loading.gif" /></h3>
                    <p>Dissatisfied</p>
                    @*<p>Incomplete Survey</p>*@
                </div>
                <div class="icon">
                    <i class="ion-android-download"></i>
                </div>
                @*<a href="@Url.Action("GetAllCompanies","CompanyMaster")" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>*@
            </div>
        </div>
        <div class="col-sm-2 col-half-offset">
            <!-- small box -->
            <div class="small-box animated bounceInLeft" style="background-color:#806517;">
                <div class="inner">
                    <p style="margin:0 0 1px;color:#fff;">Surveys&nbsp;-&nbsp;<span id="surveys"><img class="dashImg2" src="~/public/img/loading.gif" /></span></p>
                    <p style="margin:0 0 1px;color:#fff;">Contacts&nbsp;-&nbsp;<span id="contacts"><img class="dashImg2" src="~/public/img/loading.gif" /></span></p>
                    <p style="margin:0 0 1px;color:#fff;">Total Calls&nbsp;-&nbsp;<span id="totalCalls"><img class="dashImg2" src="~/public/img/loading.gif" /></span></p>
                    <p style="margin:0 0 -5px;color:#fff;">Date&nbsp;-&nbsp;@DateTime.Today.ToShortDateString()</p>

                </div>
                 </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-primary">


                <div class="panel-heading">
                    <b id="pnlHead">PSF List For 3rd Day FeedBack</b>

                    <button style="background-color:red;float:right;height:30px;width:100px;margin-top:-5px; " onclick="clearbucketfilters();" title="CLEAR FILTER">CLEAR&nbsp;FILTER</button>
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <ul class="nav nav-tabs" id="myTab" role="tablist" style="background-color: #dcc1c1;">
                        <li class="active bucket" id="li-PSF" data-bucket="1">
                            <a class="nav-link active" id="PSF-tab" data-toggle="tab" href="#PSF" role="tab" aria-controls="home"
                               aria-selected="true"></a>
                        </li>
                        <li class="bucket" id="li-FollowUpRequired" data-bucket="2">
                            <a class="nav-link active" id="FollowUpRequired-tab" data-toggle="tab" href="#FollowUpRequired" role="tab" aria-controls="home"
                               aria-selected="true">Pending FollowUp</a>
                        </li>
                        @*<li class="bucket" id="li-completedSurvey" data-bucket="3">
                            <a class="nav-link active" id="completedSurvey-tab" data-toggle="tab" href="#completedSurvey" role="tab" aria-controls="home"
                               aria-selected="true">Completed Survey</a>
                        </li>*@
                        <li class="bucket" id="li-dissatisfied" data-bucket="4">
                            <a class="nav-link active" id="dissatisfied-tab" data-toggle="tab" href="#dissatisfied" role="tab" aria-controls="home"
                               aria-selected="true">Dissatisfied</a>
                        </li>
                        <li class="bucket" id="li-nonContacts" data-bucket="5">
                            <a class="nav-link active" id="nonContacts-tab" data-toggle="tab" href="#nonContacts" role="tab" aria-controls="home"
                               aria-selected="true">NonContacts</a>
                        </li>
                        <li class="bucket" id="li-dropped" data-bucket="6" style="display:none;">
                            <a class="nav-link active" id="dropped-tab" data-toggle="tab" href="#dropped" role="tab" aria-controls="home"
                               aria-selected="true">Droppped</a>
                        </li>
                        <li class="bucket" id="li-resolved" data-bucket="7">
                            <a class="nav-link active" id="resolved-tab" data-toggle="tab" href="#resolved" role="tab" aria-controls="home"
                               aria-selected="true">Resolved</a>
                        </li>
                        <li class="bucket" id="li-FutureFollowUpRequired" data-bucket="8">
                            <a class="nav-link active" id="FutureFollowUpRequired-tab" data-toggle="tab" href="#FutureFollowUpRequired" role="tab" aria-controls="home"
                               aria-selected="true">Future FollowUp</a>
                        </li>

                    </ul>
                    <div class="tab-content" id="Tabs">
                        <div class="panel panel-default" style="border-top: #fff;">
                            <div class="panel-body">
                                <div class="row">
                                    <div id="forDateschedule" style="display:block">
                                        <div class="col-md-3" id="SchedulefromBillDate">
                                            <label>From Delivery Date : </label>
                                            <input type="text" class="filter form-control datepicExpiryFromDropDown" placeholder="Enter From Delivery Date" data-field="FromBillDate" data-column-index="1" onchange="getfilters(this)" id="frombilldaterange" name="frombilldaterange" readonly>
                                        </div>
                                        <div class="col-md-3" id="ScheduletoBillDate">
                                            <label>To Delivery Date : </label>
                                            <input type="text" class="filter form-control datepicExpiryToDropDown" placeholder="Enter To Delivery Date" data-field="ToBillDate" data-column-index="2" onchange="getfilters(this)" id="tobilldaterange" name="tobilldaterange" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3" id="modelDiv">
                                        <label>Model</label><br />
                                        @Html.DropDownList("ddlWorkshop", new SelectList(ViewBag.ddlmodel, "model", "model"), "Select", new { @class = "filter form-control selectpicker", @id = "model", @data_field = "model", @onchange = "getfilters(this);" })
                                    </div>

                                    @if (Session["OEM"].ToString() == "MARUTI SUZUKI")
                                    {
                                        <div class="col-md-3" id="modelCatDiv">
                                            <label>Model Category</label>
                                            <select class="filter form-control" id="ddlmodelCategory" onchange="getfilters(this);" data-column-index="5" data-field="ddlmodelCategory" name="ddlmodelCategory">
                                                <option value="">--Select--</option>
                                                <option value="Arena">Arena</option>
                                                <option value="Nexa">Nexa</option>
                                                @*<option value="3">Commercial</option>
                    <option value="4">No Mapping</option>*@
                                            </select>
                                        </div>
                                    }


                                        <div class="col-md-3" id="modelDiv">
                                            <label>Dealer</label><br />
                                            @Html.DropDownList("ddldealername", new SelectList(ViewBag.ddldealerName, "dealershipName", "dealershipName"), "Select", new { @class = "filter form-control selectpicker", @id = "ddldealername", @data_field = "ddldealername", @onchange = "getfilters(this);" })
                                        </div>

                                        <div class="col-md-3" id="modelDiv">
                                            <label>Sales Outlet</label><br />
                                            @Html.DropDownList("ddlserviceoutlet", new SelectList(ViewBag.ddloutlet, "vipDealer", "vipDealer"), "Select", new { @class = "filter form-control selectpicker", @id = "ddlserviceoutlet", @data_field = "ddlserviceoutlet", @onchange = "getfilters(this);" })
                                        </div>

                                        <div class="col-md-2" id="lastdispositionDiv" style="display:none;">
                                            <label>Last Disposition</label>
                                            @Html.DropDownList("serviceTypeDDL", new SelectList(ViewBag.ddllastdisposition, "id", "disposition"), "--Select--", new { @class = "form-control filter selectpicker", @data_field = "ddllastdisposition", @id = "ddllastdisposition", @onchange = "getfilters(this);", @autocomplete = "off" })
                                        </div>
                                        @*<div class="col-md-3" id="modelDiv">
                <label>Dealership Name</label><br />
                @Html.DropDownList("ddlWorkshop", new SelectList(ViewBag.ddlmodel, "name", "name"), "Select", new { @class = "filter form-control selectpicker", @id = "model", @data_field = "model", @onchange = "getfilters(this);" })
            </div>*@

                                        @*<div class="col-md-3" id="workshopDiv" style="display: block;">
                <label>Workshop</label>
                @Html.DropDownList("ddlWorkshop", new SelectList(ViewBag.ddlWorkshop, "workshopId", "workshopName"), "Select", new { @class = "filter form-control", @id = "workshop", @data_field = "workshop", @onchange = "getfilters(this);" })
            </div>*@
                                    </div>
                                <div class="row">

                                </div>
                            </div>
                        </div>

                        <div class="panel panel-default tab-pane fade active in" id="PSF" role="tabpanel" aria-labelledby="PSF-tab">

                            <div>
                                <table id="tblPSF" class="table table-striped table-bordered table-hover" cellspacing="0" style="clear:both;table-layout:fixed;width:400px;">
                                    <thead>
                                        <tr>
                                            <th>Action</th>
                                            <th>Action</th>
                                            <th>Customer Name</th>
                                            <th>Mobile Number</th>
                                            <th>Vehicle RegNo.</th>
                                            <th>Chassis No</th>
                                            <th>Model</th>
                                                <th>Model Category</th>
                                                <th>DSE</th>
                                                <th>Sale Date</th>
                                                <th>Dealer Name</th>
                                                <th>Sales Outlet</th>
                                            </tr>
                                    </thead>

                                    <tbody align="center"></tbody>
                                </table>
                            </div>
                        </div>

                        <div class="panel panel-default tab-pane fade" id="FollowUpRequired" role="tabpanel" aria-labelledby="FollowUpRequired-tab">
                            <div>
                                <table id="tblFollowUpRequired" class="table table-striped table-bordered table-hover" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>Action</th>
                                            <th>Action</th>
                                            <th>Customer Name</th>
                                            <th>Mobile Number</th>
                                            <th>Vehicle RegNo</th>
                                            <th>Chassis No</th>
                                            <th>Model</th>
                                            <th>call date</th>
                                            <th>FollowUp Date</th>
                                            <th>FollowUp Time</th>
                                            <th>Model Category</th>
                                            <th>DSE</th>
                                            <th>Sale Date</th>
                                            <th>Dealer Name</th>
                                            <th>Sales Outlet</th>
                                        </tr>
                                    </thead>
                                    <tbody align="center"></tbody>
                                </table>
                            </div>
                        </div>


                        <div class="panel panel-default tab-pane fade" id="completedSurvey" role="tabpanel" aria-labelledby="completedSurvey-tab">
                            <div>
                                <table id="tblcompletedSurvey" class="table table-striped table-bordered table-hover" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>Action</th>
                                            <th>Action</th>
                                            <th>Survey Date</th>
                                            <th>Customer Name</th>
                                            <th>category</th>
                                            <th>vehicle RegNo</th>
                                            <th>model</th>
                                            <th>RO Number</th>
                                            <th>Bill Date</th>
                                            <th>Workshop</th>
                                            <th>SA Name</th>
                                            <th>attempts</th>
                                            <th>ServiceType</th>
                                            <th>Customer Category</th>
                                            <th>Dealer Name</th>
                                            <th>Sales Outlet</th>
                                        </tr>
                                    </thead>
                                    <tbody align="center"></tbody>
                                </table>
                            </div>
                        </div>

                        <div class="panel panel-default tab-pane fade" id="dissatisfied" role="tabpanel" aria-labelledby="dissatisfied-tab">
                            <div>
                                <table id="tbldissatisfied" class="table table-striped table-bordered table-hover" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>Action</th>
                                            <th>Action</th>
                                            <th>Customer Name</th>
                                            <th>Mobile Number</th>
                                            <th>Vehicle RegNo</th>
                                            <th>Chassis No</th>
                                            @*<th>Sale Date</th>*@
                                            <th>Model</th>
                                            <th>Model Category</th>
                                            <th>DSE</th>
                                            <th>Sale Date</th>
                                            <th>Dealer Name</th>
                                            <th>Sales Outlet</th>
                                        </tr>
                                    </thead>
                                    <tbody align="center"></tbody>
                                </table>
                            </div>
                        </div>


                        <div class="panel panel-default tab-pane fade" id="nonContacts" role="tabpanel" aria-labelledby="nonContacts-tab">
                            <div>
                                <table id="tblnonContacts" class="table table-striped table-bordered table-hover" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>Action</th>
                                            <th>Action</th>
                                            <th>Customer Name</th>
                                            <th>Mobile Number</th>
                                            <th>Vehicle RegNo</th>
                                            <th>Chassis No</th>
                                            @*<th>Sale Date</th>*@
                                            <th>Model</th>
                                            <th>Call Date</th>
                                            <th>Last Disposition</th>
                                            <th>Model Category</th>
                                            <th>DSE</th>
                                            <th>Sale Date</th>
                                            <th>Dealer Name</th>
                                            <th>Sales Outlet</th>
                                        </tr>
                                    </thead>
                                    <tbody align="center"></tbody>
                                </table>
                            </div>
                        </div>


                        <div class="panel panel-default tab-pane fade" id="dropped" role="tabpanel" aria-labelledby="dropped-tab">
                            <div>
                                <table id="tbldropped" class="table table-striped table-bordered table-hover" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>Action</th>
                                            <th>Action</th>
                                            <th>Call Date</th>
                                            <th>Customer Name</th>
                                            <th>category</th>
                                            <th>Mobile number</th>
                                            <th>Vehicle RegNo</th>
                                            <th>model</th>
                                            <th>RO Number</th>
                                            <th>Bill Date</th>
                                            <th>Last Disposition</th>
                                            <th>Workshop</th>
                                            <th>SA Name</th>
                                            <th>attempts</th>
                                            <th>ServiceType</th>
                                            <th>Customer Category</th>
                                            <th>Dealer Name</th>
                                            <th>Sales Outlet</th>
                                        </tr>
                                    </thead>
                                    <tbody align="center"></tbody>
                                </table>
                            </div>
                        </div>

                        <div class="panel panel-default tab-pane fade" id="resolved" role="tabpanel" aria-labelledby="dropped-tab">
                            <div>
                                <table id="tblresolved" class="table table-striped table-bordered table-hover" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>

                                            <th>Action</th>
                                            <th>Action</th>
                                            <th>Customer Name</th>
                                            <th>Mobile number</th>
                                            <th>Vehicle Reg No</th>
                                            <th>Chassis No.</th>
                                            <th>Secondary Disposition</th>
                                            <!--<th>-->@*Complaint CRE*@<!--</th>-->
                                            <th>Model Category</th>
                                            <th>Call Date</th>
                                            <th>Model</th>
                                            <th>Sale Date</th>
                                            <th>Dealer Name</th>
                                            <th>Sales Outlet</th>
                                        </tr>
                                    </thead>
                                    <tbody align="center"></tbody>
                                </table>
                            </div>
                        </div>

                        <div class="panel panel-default tab-pane fade" id="FutureFollowUpRequired" role="tabpanel" aria-labelledby="FutureFollowUpRequired-tab">
                            <div>
                                <table id="tblFutureFollowUpRequired" class="table table-striped table-bordered table-hover" width="100%" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>Action</th>
                                            <th>Action</th>
                                            <th>Customer Name</th>
                                            <th>Mobile Number</th>
                                            <th>Vehicle RegNo</th>
                                            <th>Chassis No</th>
                                            <th>Model</th>
                                            <th>Call Date</th>
                                            <th>FollowUp Date</th>
                                            <th>FollowUp Time</th>
                                            <th>Model Category</th>
                                            <th>DSE</th>
                                            <th>Sale Date</th>
                                            <th>Dealer Name</th>
                                            <th>Sales Outlet</th>
                                        </tr>
                                    </thead>
                                    <tbody align="center"></tbody>
                                </table>
                            </div>
                        </div>
                        <span id="tblException" style="font-size:12pt;color:red;"></span>

                    </div><!--Tabs-->
                </div>
                <!-- /.col-lg-12 -->
            </div>
        </div>
    </div>
</div>


@section scripts
{
    @if (ViewBag.dispositionResult != null && ViewBag.dispoError == false)
    {
        <script type="text/javascript">
        Lobibox.notify('info', {
            delay: 4 * 7000,
            msg: '@ViewBag.dispositionResult'
        });
        </script>
    }

    @if (ViewBag.dispositionResult != null && ViewBag.dispoError == true)
    {
        <script type="text/javascript">
        Lobibox.notify('info', {
            delay: 4 * 7000,
            msg: '@ViewBag.dispositionResult'
        });
        </script>
    }

<script type="text/javascript">
        var presentBucket = 1, filtDist = {}, dealerCode = "", callLogingAction = "";
        dealerCode = '@Session["DealerCode"].ToString()';


        callLogingAction = "/Home/redirectToCallLogging";

    //Date Conversion
        $('li.bucket').on('click', function () {
            var id = $(this).attr('id');
            //removing current style
            $('li.bucket').removeClass('active');
            $('div.fade').removeClass('show active in');

            //applying new style
            $('#' + id).addClass('active');
            $('#' + id.split('-')[1]).addClass('show active in');
            presentBucket = $(this).attr('data-bucket');
            makeAjaxCall();
            manageFilters(presentBucket);
           // clearbucketfilters();

        })

    function makeAjaxCall() {
        if (presentBucket == 7) {
            $('#lastdispositionDiv').show();
        }
        else{
            $('#lastdispositionDiv').hide();
        }
            if (presentBucket == 1) {
                bindPSFData();
            } else if (presentBucket == 2) {
                bindfollowUpData();
            } else if (presentBucket == 3) {
                bindcompletedsurveyData();
            } else if (presentBucket == 4) {
                binddissatisfiedData();
            } else if (presentBucket == 5) {
                bindnonContactData();
            } else if (presentBucket == 6) {
                bindDroppedData();
            } else if (presentBucket == 7) {
                bindresolved();
            }
            else if (presentBucket == 8) {
                bindfutureFollowUpData();
            }
        }


        $(document).ready(function () {

             $.ajax({
                type: "POST",
                url: siteRoot + "/postSalesDetails/loadDashboardCounts/",
                data: {},
                cache: false,
                success: function (res) {
                    if (res.success == true) {
                        $('#freshPSF').text(res.freshPSF);
                        $('#pendingFollow').text(res.pendingFollow);
                        $('#nonContactss').text(res.nonContacts);
                        $('#incompleteSurvey').text(res.incompleteSurvey);

                        $('#surveys').text(res.surveys);
                        $('#contacts').text(res.contacts);
                        $('#totalCalls').text(res.totalCalls);
                    }
                    else {
                        Lobibox.notify('warning', {
                            msg: res.error
                        });
                    }
                },
                error: function (data) {
                    alert("Cann't load Dashboard count, Error occured while processing data");
                }
            });
              var myVal = '@Session["PostSalesFeedbackCampaign"]';

            if (myVal == "PostSales 2nd Day") {
                $("#PSF-tab").text("2nd Day PSF")
                $("#pnlHead").text("2nd Day PSF")
                $("#dissatisfied-tab").css("display", "block");

            }
            else if (myVal == "PostSales 15th Day") {
                $("#PSF-tab").text("15th Day PSF")
                $("#pnlHead").text("15th Day PSF")

                $("#dissatisfied-tab").css("display", "block");
            }
            else if (myVal == "PostSales 30th Day") {
                $("#PSF-tab").text("PostSales 30th Day")
                $("#pnlHead").text("PostSales 30th Day")

                $("#dissatisfied-tab").css("display", "block");
            }
            else {
                $("#PSF-tab").text("PostSales  Day")
                $("#pnlHead").text("PostSales  Day")

                $("#dissatisfied-tab").css("display", "block");
            }
              $('.datepickerFilter').datepicker({
                  duration: "slow",
                  showAnim: "slide",
                  showOptions: { direction: "up" },
                  dateFormat: 'yy-mm-dd',
                  changeMonth: true,//this option for allowing user to select month
                  changeYear: true //this option for allowing user to select from year range
              });


            $('.datepicExpiryFromDropDown').datepicker({
                changeMonth: true,
                changeYear: true,
                autoclose: true,
                dateFormat: 'yy-mm-dd',
                //maxDate: new Date(),
                onSelect: function (date) {
                    $('.datepicExpiryToDropDown').datepicker("destroy");
                    $('.datepicExpiryToDropDown').datepicker("destroy");
                    $('.datepicExpiryToDropDown').datepicker({
                        autoclose: true,
                        dateFormat: 'yy-mm-dd',
                        minDate: $('.datepicExpiryFromDropDown').datepicker('getDate')
                    });
                    $(this).trigger('change'); var dt1 = $('.datepicExpiryFromDropDown').datepicker('getDate');
                    var dt2 = $('.datepicExpiryToDropDown').datepicker('getDate');
                    if (dt2 <= dt1) {
                        var minDate = $('#dt2').datepicker('option', 'minDate');
                        $('.datepicExpiryToDropDown').datepicker('setDate', null);
                    }
                }
            })

            $('.datepicAppointmentFromDropDown').datepicker({
                changeMonth: true,
                changeYear: true,
                autoclose: true,
                dateFormat: 'yy-mm-dd',
                //maxDate: new Date(),
                onSelect: function (date) {
                    $('.datepicAppointmentToDropDown').datepicker("destroy");
                    $('.datepicAppointmentToDropDown').datepicker("destroy");
                    $('.datepicAppointmentToDropDown').datepicker({
                        autoclose: true,
                        dateFormat: 'yy-mm-dd',
                        minDate: $('.datepicAppointmentFromDropDown').datepicker('getDate')
                    });
                    $(this).trigger('change'); var dt1 = $('.datepicAppointmentFromDropDown').datepicker('getDate');
                    var dt2 = $('.datepicAppointmentToDropDown').datepicker('getDate');
                    if (dt2 <= dt1) {
                        var minDate = $('#dt2').datepicker('option', 'minDate');
                        $('.datepicAppointmentToDropDown').datepicker('setDate', null);
                    }
                }
            })

          //  localStorage.removeItem("PsfFilter");
              if (localStorage.length > 0) {
                  filtDist = JSON.parse(localStorage.getItem("PsfFilter"));
                  if (filtDist != null) {
                      renderFilterData();
                      localStorage.removeItem("PsfFilter");
                  }
                  else {
                      presentBucket = 1;
                      filtDist = {};
                      bindPSFData();
                  }

              }
              else {
                  presentBucket = 1;
                  bindPSFData();
              }
              manageFilters(presentBucket);
              //bindPSFData();
        });

        //re-render the filtered element
        function renderFilterData() {
            //debugger;
            for (var key in filtDist) {
                if (key !== "getDataFor" && key !== "isFiltered") {
                    var element = $('.filter[data-field="' + key + '"]');
                    $(element).val(filtDist[key]);
                }
            }
            if (filtDist["getDataFor"] != null) {
                presentBucket = filtDist["getDataFor"];
                var liElement = $('.bucket[data-bucket="' + presentBucket + '"]');
                var id = liElement[0].id;
                //removing current style
                $('li.bucket').removeClass('active');
                $('div.fade').removeClass('show active in');

                //applying new style
                $('#' + id).addClass('active');
                $('#' + id.split('-')[1]).addClass('show active in');

                manageFilters(presentBucket);
                makeAjaxCall();
            }
        }

        //hide and show divs
        function manageFilters(bucketId)
        {
            if (bucketId == 1)
            {
                  //Showing Div
                  $('#forDateschedule').css({ 'display': 'block' });
                  //$('#forCallschedule').css({ 'display': 'none' });
                  $('#ageingDiv').css({ 'display': 'none' });

              }
              else if (bucketId == 7)
              {
                $('#forDateschedule').css({ 'display': 'block' });
                //  $('#forCallschedule').css({ 'display': 'block' });
                  $('#ageingDiv').css({ 'display': 'block' });
              }
            else
            {
                $('#forDateschedule').css({ 'display': 'block' });
                 // $('#forCallschedule').css({ 'display': 'block' });
                  $('#ageingDiv').css({ 'display': 'none' });
              }
          }
             //Clear Buckets data
        function clearbucketfilters()
        {
            filtDist = {};

            $('#tobilldaterange').val('');
            $('#frombilldaterange').val('');
            $('#workshop').prop('selectedIndex', 0);
            $('#ddlmodelCategory').prop('selectedIndex', 0);
            $('#model').removeClass('selectpicker');
            $('#model').prop('selectedIndex', 0);
            $('#model').addClass('selectpicker');
            $('#model').multiselect('rebuild');


            $('#ddldealername').removeClass('selectpicker');
            $('#ddldealername').prop('selectedIndex', 0);
            $('#ddldealername').addClass('selectpicker');
            $('#ddldealername').multiselect('rebuild');

            $('#ddlserviceoutlet').removeClass('selectpicker');
            $('#ddlserviceoutlet').prop('selectedIndex', 0);
            $('#ddlserviceoutlet').addClass('selectpicker');
            $('#ddlserviceoutlet').multiselect('rebuild');


            filtDist = {};
            makeAjaxCall();

        }

        //Function to access filter data
        function getfilters(item) {
            var field = $(item).attr('data-field');
            var data = $(item).val();
            if (filtDist[field] === undefined) {
                filtDist[field] = data;

                if (data != "")
                {
                    filtDist["isFiltered"] = true;
                }
                else if ($('#tobCalldaterange33').val() === "" && $('#fromCalldaterange22').val() === "" && $('#tobilldaterange').val() === "" && $('#frombilldaterange').val() === "" && $('#workshop').val() == "0" && $('#ageing').val() == "" && $('#customerCategoryDDL').val() == "" && $('#serviceTypeDDL').val() == "" && $('#ddldealername').val() == "" && $('#ddlserviceoutlet').val() == "")
                {
                    filtDist["isFiltered"] = false;
                }
            }
            else
            {
                filtDist[field] = data;
                if (data != "")
                {
                    filtDist["isFiltered"] = true;
                }
                else if ($('#tobCalldaterange33').val() === "" && $('#fromCalldaterange22').val() === "" && $('#tobilldaterange').val() === "" && $('#frombilldaterange').val() === "" && $('#workshop').val() == "0" && $('#ageing').val() == "" && $('#customerCategoryDDL').val() == "" && $('#serviceTypeDDL').val() == "" && $('#ddldealername').val() == "" && $('#ddlserviceoutlet').val() == "")
                {
                    filtDist["isFiltered"] = false;
                }
            }
            makeAjaxCall();
        }

        //******************** recording filter ***************
        function recordFilter() {
            localStorage.setItem("PsfFilter", JSON.stringify(filtDist));
            console.log("hello");
        }
            //--------------------------- Binding Data To Table ---------------------------------------

            //***************** PSF Table *****************************
                    var role = '@Session["UserRole"].ToString()';

    function bindPSFData() {
                filtDist["getDataFor"] = 1;
                var postsalesTableFreshCalls = $('#tblPSF').DataTable({
                    "destroy": true,
                    "ajax": {
                        "url": siteRoot +"/postSalesDetails/GetBucketData/",
                        "type": "POST",
                        "datatype": "json",
                        "data": { psfData: JSON.stringify(filtDist) },
                        "timeout": 39000,

                    },
                    "columns": [
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                            }
                        },
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                    return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CREManager%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                            }
                        },
                        { "data": "customer_name", "name": "customer_name" },
                        { "data": "Mobile_number", "name": "Mobile_number" },
                        { "data": "vehicle_RegNo", "name": "vehicle_RegNo" },
                        { "data": "chassisno", "name": "chassisno" },
                        { "data": "model", "name": "model" },
                        { "data": "modelcat", "name": "modelcat" },
                        { "data": "dse", "name": "dse" },
                        {
                            "data": "saleDate", render: function (data, type, row) {
                                return reverDate(data)
                            }
                        },
                        { "data": "dealershipName", "name": "dealershipName" },
                        { "data": "dlryoutlet", "name": "dlryoutlet" }
                    ],
                    "serverSide": "true",
                    "processing": "true",
                    "serverSide": true,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": "true",
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"
                    },
                    "initComplete": function (data) {
                        if (role == "CRE") {
                            postsalesTableFreshCalls.columns(1).visible(false)
                        }
                        else if (role == "CREManager") {
                            postsalesTableFreshCalls.columns(0).visible(false)
                        }
                        else {
                            postsalesTableFreshCalls.columns(1).visible(false)
                        }
                        $('#tblException').text(data.json.exception);
                        // filtercountDisplay();

                    }
                });
            }
            /************  End postSalesDetails Data ***************/
            //--------------------------- Binding Data To Table ---------------------------------------

            //***************** Follow Up Table *****************************
            function bindfollowUpData() {
                filtDist["getDataFor"] = 2;
                postsalesTableFollowUp = $('#tblFollowUpRequired').DataTable({
                    "destroy": true,
                    "ajax": {
                        "url":siteRoot+"/postSalesDetails/GetBucketData/",
                        "type": "POST",
                        "datatype": "json",
                        "data": { psfData: JSON.stringify(filtDist) }
                    },
                    "columns": [
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                                                return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                                //return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                            }
                        },
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                    return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CREManager%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                            }
                        },
                        { "data": "customer_name", "name": "customer_name" },
                        { "data": "Mobile_number", "name": "Mobile_number" },
                        { "data": "vehicle_RegNo", "name": "vehicle_RegNo" },
                        { "data": "chassisno", "name": "chassisno" },
                        { "data": "model", "name": "model" },
                        { "data": "calldate", "name": "calldate" },
                        { "data": "followUpDate", "followUpDate": "RONumber" },
                        { "data": "followUpTime", "name": "followUpTime" },
                        { "data": "modelcat", "name": "modelcat" },
                        { "data": "dse", "name": "dse" },
                        {
                            "data": "salesdate", "render": function (data, type, row) {
                                return reverDate(data);
                            }
                        },
                        { "data": "dealershipName", "name": "dealershipName" },
                        { "data": "dlryoutlet", "name": "dlryoutlet" }
                    ],
                    "serverSide": "true",
                    "processing": "true",
                    "serverSide": true,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": "true",
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"
                    },
                    "initComplete": function (data) {
                        if (role == "CRE") {
                            postsalesTableFollowUp.columns(1).visible(false)
                        }
                        else if (role == "CREManager") {
                            postsalesTableFollowUp.columns(0).visible(false)
                        }
                        else {
                            postsalesTableFollowUp.columns(1).visible(false)
                        }
                        $('#tblException').text(data.json.exception);
                        // filtercountDisplay();

                    }
                });
            }
            /************  End Follow Up Data ***************/


            //***************** Completed Survey Table *****************************
            function bindcompletedsurveyData(data) {
                filtDist["getDataFor"] = 3;
                postsalesTableCompletedSurvey = $('#tblcompletedSurvey').DataTable({
                    "destroy": true,
                    "ajax": {
                        "url":siteRoot+"/postSalesDetails/GetBucketData/",
                        "type": "POST",
                        "datatype": "json",
                        "data": { psfData: JSON.stringify(filtDist) }
                    },
                    "columns": [
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;vehicle_id = "58684"
                                                                return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                                //return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                            }
                        },
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                    return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CREManager%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                            }
                        },
                        {
                            "data": "Servey_date", render: function (data, type, row) {
                                return parseJsonDateTime(data);
                            }
                        },
                        { "data": "customer_name", "name": "customer_name" },
                        { "data": "category", "name": "category" },
                        { "data": "vehicle_RegNo", "name": "vehicle_RegNo" },
                        { "data": "model", "name": "model" },
                        { "data": "RONumber", "name": "RONumber" },
                        {
                            "data": "BillDate", render: function (data, type, row) {
                                return parseJsonDateTime(data);
                            }
                        },
                        { "data": "workshop", "name": "workshop" },
                        { "data": "saname", "name": "saname" },
                        { "data": "attempts", "name": "attempts" },
                        { "data": "servicetype", "name": "servicetype" },
                        { "data": "customercategory", "name": "customercategory" }
                    ],
                    "serverSide": "true",
                    "processing": "true",
                    "serverSide": true,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": "true",
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"
                    },
                    "initComplete": function (data) {
                        if (role == "CRE") {
                            postsalesTableCompletedSurvey.columns(1).visible(false)
                        }
                        else if (role == "CREManager") {
                            postsalesTableCompletedSurvey.columns(0).visible(false)
                        }
                        else {
                            postsalesTableCompletedSurvey.columns(1).visible(false)
                        }
                        $('#tblException').text(data.json.exception);
                        // filtercountDisplay();

                    }
                });
            }
            /************  End Completed Survey ***************/

            //***************** Dissatisfied Table *****************************
            function binddissatisfiedData(data) {
                filtDist["getDataFor"] = 4;
                postsalesTableDissatisfied = $('#tbldissatisfied').DataTable({
                    "destroy": true,
                    "ajax": {
                        "url":siteRoot+"/postSalesDetails/GetBucketData/",
                        "type": "POST",
                        "datatype": "json",
                        "data": { psfData: JSON.stringify(filtDist) }
                    },
                    "columns": [
                        {
                            "data": "Action", render: function (data, type, row) {
                                return `<a class="fa fa-id-card-o" href="${siteRoot}${callLogingAction}/CREHdd%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                                //debugger;
                                //return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                            }
                        },
                        {
                            "data": "Action", render: function (data, type, row) {
                                return `<a class="fa fa-id-card-o" href="${siteRoot}${callLogingAction}/CREManager%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                                //debugger;
                                //return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                            }
                        },
                        { "data": "customer_name", "name": "customer_name" },
                        { "data": "Mobile_number", "name": "Mobile_number" },
                        { "data": "vehicle_RegNo", "name": "vehicle_RegNo" },
                        { "data": "chassisno", "name": "chassisno" },
                        //{
                        //    "data": "salesdate", render: function (data, type, row) {
                        //        return reverDate(data);
                        //    }
                        //},
                        { "data": "model", "name": "model" },
                        { "data": "modelcat", "name": "modelcat" },
                        { "data": "dse", "name": "dse" },
                        {
                            "data": "saleDate", render: function (data, type, row) {
                                return reverDate(data)
                            }
                        },
                        { "data": "dealershipName", "name": "dealershipName" },
                        { "data": "dlryoutlet", "name": "dlryoutlet" }
                    ],
                    "serverSide": "true",
                    "processing": "true",
                    "serverSide": true,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": "true",
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"
                    },
                    "initComplete": function (data) {
                        if (role == "CRE") {
                            postsalesTableDissatisfied.columns(1).visible(false)
                        }
                        else if (role == "CREManager") {
                            postsalesTableDissatisfied.columns(0).visible(false)
                        }
                        else {
                            postsalesTableDissatisfied.columns(1).visible(false)
                        }
                        $('#tblException').text(data.json.exception);
                        // filtercountDisplay();

                    }
                });
            }
            /************  End Dissatisfied Data ***************/

            //--------------------------- Binding Data To Table ---------------------------------------

            //***************** Non Contacts Table *****************************
            function bindnonContactData(data) {
                filtDist["getDataFor"] = 5;
                postsalesTableNonContacts = $('#tblnonContacts').DataTable({
                    "destroy": true,
                    "ajax": {
                        "url":siteRoot+"/postSalesDetails/GetBucketData/",
                        "type": "POST",
                        "datatype": "json",
                        "data": { psfData: JSON.stringify(filtDist) }
                    },
                    "columns": [
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                                                return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                                //return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                            }
                        },
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CREManager%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                            }
                        },
                        { "data": "customer_name", "name": "customer_name" },
                        { "data": "Mobile_number", "name": "Mobile_number" },
                        { "data": "vehicle_RegNo", "name": "vehicle_RegNo" },
                        { "data": "chassisno", "name": "chassisno" },
                        //{ "data": "salesdate", "name": "salesdate" },
                        { "data": "model", "name": "model" },
                        {
                            "data": "calldate", render: function (data, type, row) {
                                return reverDate(data);
                            }
                        },
                        { "data": "Last_disposition", "name": "Last_disposition" },
                        { "data": "modelcat", "name": "modelcat" },
                        { "data": "dse", "name": "dse" },
                        {
                            "data": "saleDate", render: function (data, type, row) {
                                return reverDate(data)
                            }
                        },
                        { "data": "dealershipName", "name": "dealershipName" },
                        { "data": "dlryoutlet", "name": "dlryoutlet" }
                    ],
                    "serverSide": "true",
                    "processing": "true",
                    "serverSide": true,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": "true",
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"
                    },
                    "initComplete": function (data) {
                        if (role == "CRE") {
                            postsalesTableNonContacts.columns(1).visible(false)
                        }
                        else if (role == "CREManager") {
                            postsalesTableNonContacts.columns(0).visible(false)
                        }
                        else {
                            postsalesTableNonContacts.columns(1).visible(false)
                        }
                        $('#tblException').text(data.json.exception);
                        // filtercountDisplay();

                    }
                });
            }
            /************  End Non Contacts Data ***************/


            //***************** Dropped Table *****************************
            function bindDroppedData() {
                filtDist["getDataFor"] = 6;
                postsalesTableDropped = $('#tbldropped').DataTable({
                    "destroy": true,
                    "ajax": {
                        "url":siteRoot+"/postSalesDetails/GetBucketData/",
                        "type": "POST",
                        "datatype": "json",
                        "data": { psfData: JSON.stringify(filtDist) }
                    },
                    "columns": [
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                //return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2c${row.customer_id}%2c${row.vehical_Id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                                                                return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                            }
                        },
                        {
                            "data": "Action", render: function (data, type, row) {
                                     return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CREManager%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                            }
                        },
                        {
                            "data": "call_date", render: function (data, type, row) {
                                return parseJsonDateTime(data);
                            }
                        },
                        { "data": "customer_name", "name": "customer_name" },
                        { "data": "category", "name": "category" },
                        { "data": "Mobile_number", "name": "Mobile_number" },
                        { "data": "vehicle_RegNo", "name": "vehicle_RegNo" },
                        { "data": "model", "name": "model" },
                        { "data": "RONumber", "name": "RONumber" },
                        {
                            "data": "BillDate", render: function (data, type, row) {
                                return parseJsonDateTime(data);
                            }
                        },
                        { "data": "followupdate", "name": "followupdate" },
                        { "data": "workshop", "name": "workshop" },
                        { "data": "saname", "name": "saname" },
                        { "data": "attempts", "name": "attempts" },
                        { "data": "servicetype", "name": "servicetype" },
                        { "data": "customercategory", "name": "customercategory" }
                    ],
                    "serverSide": "true",
                    "processing": "true",
                    "serverSide": true,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": "true",
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"
                    },
                    "initComplete": function (data) {
                        if (role == "CRE") {
                            postsalesTableDropped.columns(1).visible(false)
                        }
                        else if (role == "CREManager") {
                            postsalesTableDropped.columns(0).visible(false)
                        }
                        else {
                            postsalesTableDropped.columns(1).visible(false)
                        }
                        $('#tblException').text(data.json.exception);
                        // filtercountDisplay();

                    }
                });
            }
    /************  End Dropped Data ***************/
              //***************** Resolved Table *****************************

    function bindresolved() {
                filtDist["getDataFor"] = 7;
        postsalesTableResolved = $('#tblresolved').DataTable({
                    "destroy": true,
                    "ajax": {
                        "url":siteRoot+"/postSalesDetails/GetBucketData/",
                        "type": "POST",
                        "datatype": "json",
                        "data": { psfData: JSON.stringify(filtDist) }
                    },
                    "columns": [
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                                                return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${63}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                                //return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${63}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                            }
                        },
                        {
                            "data": "Action", render: function (data, type, row) {
                                      return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CREManager%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${63}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                            }
                        },
                        { "data": "customerName", "name": "customerName" },
                        { "data": "prefferedPhoneNumber", "name": "prefferedPhoneNumber" },
                        { "data": "vehicleRegNo", "name": "vehicleRegNo" },
                        { "data": "chassisno", "name": "chassisno" },
                        { "data": "SecondaryDisposition", "name": "SecondaryDisposition" },
                        //{ "data": "complaint_crename", "name": "complaint_crename" },
                        { "data": "modelcat", "name": "modelcat" },
                        {
                            "data": "calldate", render: function (data, type, row) {
                                return reverDate(data);
                            }
                        },
                        { "data": "model", "name": "model" },
                        {
                            "data": "saleDate", render: function (data, type, row) {
                                return reverDate(data);
                            }
                        },
                        { "data": "dealershipName", "name": "dealershipName" },
                        { "data": "dlryoutlet", "name": "dlryoutlet" }
                    ],
                    "serverSide": "true",
                    "processing": "true",
                    "serverSide": true,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": "true",
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"
                    },
            "initComplete": function (data) {
                if (role == "CRE") {
                    postsalesTableResolved.columns(1).visible(false)
                }
                else if (role == "CREManager") {
                    postsalesTableResolved.columns(0).visible(false)
                }
                else {
                    postsalesTableResolved.columns(1).visible(false)
                }
                        $('#tblException').text(data.json.exception);
                        // filtercountDisplay();

                    }
                });
            }
        /************  End Resolved Data ***************/

          //***************** Future Follow Up Table *****************************
            function bindfutureFollowUpData() {
                filtDist["getDataFor"] = 8;
                postsalesTableFutureFollowUp = $('#tblFutureFollowUpRequired').DataTable({
                    "destroy": true,
                    "ajax": {
                        "url":siteRoot+"/postSalesDetails/GetBucketData/",
                        "type": "POST",
                        "datatype": "json",
                        "data": { psfData: JSON.stringify(filtDist) }
                    },
                    "columns": [
                        {
                            "data": "Action", render: function (data, type, row) {
                                //debugger;
                                                                return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`

                                //return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CRE%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                            }
                        },
                        {
                            "data": "Action", render: function (data, type, row) {
                                   return `<a class="fa fa-pencil-square" href="${siteRoot}${callLogingAction}/CREManager%2csalesfeedback%2c${row.customer_id}%2c${row.vehicle_id}%2c${row.assigned_intercation_id}%2c${0}%2c${'@Session["PostSalesFeedbackDayType"]'}%2c${row.modelcat}" style="font-size: 24pt;color: red;" onclick="recordFilter();"> </a>`
                            }
                        },
                        { "data": "customer_name", "name": "customer_name" },
                        { "data": "Mobile_number", "name": "Mobile_number" },
                        { "data": "vehicle_RegNo", "name": "vehicle_RegNo" },
                        { "data": "chassisno", "name": "chassisno" },
                        { "data": "model", "name": "model" },
                        { "data": "calldate", "name": "calldate" },
                        { "data": "followUpDate", "followUpDate": "RONumber" },
                        { "data": "followUpTime", "name": "followUpTime" },
                        { "data": "modelcat", "name": "modelcat" },
                        { "data": "dse", "name": "dse" },
                        {
                            "data": "salesdate", "render": function (data, type, row) {
                                return reverDate(data);
                            }
                        },
                        { "data": "dealershipName", "name": "dealershipName" },
                        { "data": "dlryoutlet", "name": "dlryoutlet" }
                    ],
                    "serverSide": "true",
                    "processing": "true",
                    "serverSide": true,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": "true",
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"
                    },
                    "initComplete": function (data) {
                        if (role == "CRE") {
                            postsalesTableFutureFollowUp.columns(1).visible(false)
                        }
                        else if (role == "CREManager") {
                            postsalesTableFutureFollowUp.columns(0).visible(false)
                        }
                        else {
                            postsalesTableFutureFollowUp.columns(1).visible(false)
                        }
                        $('#tblException').text(data.json.exception);
                        // filtercountDisplay();

                    }
                });
            }
            /************  End Future Follow Up Data ***************/

</script>
}
