@model AutoSherpa_project.Models.uploadtype

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <b id="pnlHead">Active Details</b>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="panel panel-primary tab-pane" id="updateDiv">
                        <div class="panel-body inf-content">
                            <div class="dataTable_wrapper">
                                <table class="table table-striped table-bordered table-hover" style="width:100%" id="isActivetype">

                                    <thead>
                                        <tr>
                                            <th>Upload DisplayName</th>
                                            <th>upload Types</th>
                                            <th>isActive</th>

                                        </tr>
                                    </thead>

                                </table>
                                <span id="tblException"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



@section scripts
{
    <script>
        $(document).ready(function () {
            $("#isActivetype").DataTable(
                {
                    "ajax": {
                        "url": siteRoot + "/SuperAdmin/GetuploadType/",
                        "type": "POST",
                        "datatype": "json",
                    },
                    "columns": [
                        { "data": "uploadDisplayName", "name": "uploadDisplayName" },
                        { "data": "uploadTypeName", "name": "uploadTypeName" },
                        {
                            "data": "isActive", "name": "isActive", render: function (data, type, row) {
                                var value = "isactive";
                                if (row.isActive == true) {
                                    return `<a href="#" onclick="activatedeactivateupdate(${row.id} ,'isactive');" style="color:green">Deactivte</a>`;
                                }
                                else {
                                    return `<a href="#" onclick="activatedeactivateupdate(${row.id} ,'isactive');" style="color:red">Activte</a>`;
                                }
                            }
                        },
                    ],
                    "initComplete": function (data) {
                        $('#tblException').text(data.json.exception);


                    },
                    "serverSide": false,
                    "scrollX": "true",
                    "scrollY": "300",
                    "paging": true,
                    "searching": true,
                    "language": {
                        "processing": "Loading Please Wait.....!"


                    },

                });
        });

        function activatedeactivateupdate(id, values) {

            $.ajax({
                "type": 'POST',
                "url": siteRoot +  "/SuperAdmin/UpdateActivate",
                "datatype": 'json',
                "data": { id: id, value: values },
                success: function (res) {
                    console.log(res);

                    if (res.success == true) {
                        Lobibox.notify('warning', {
                            continueDelayOnInactiveTab: true,
                            msg: 'changed successfully'
                        });
                        //alert(" successfully");
                        location.reload();
                    }
                    else if (res.success == false) {
                        Lobibox.notify('warning', {
                            continueDelayOnInactiveTab: true,
                            msg: 'not successful'
                        });
                    }

                }, error(error) {

                }
            });

        }


    </script>
}


